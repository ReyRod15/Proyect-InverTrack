<Window x:Class="InverTrack.ReportWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        Title="Reporte de desempeño" Height="550" Width="900" WindowStartupLocation="CenterOwner"
        Background="{DynamicResource AppBackgroundBrush}">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="2*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Encabezado: solo cantidad de transacciones y botón para imprimir/PDF -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8" VerticalAlignment="Center">
            <TextBlock x:Name="ResumenGeneral" FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>
            <Button x:Name="BtnImprimir" Content="Imprimir / PDF" Click="BtnImprimir_Click"
                    Margin="12,0,0,0" Height="26" Style="{StaticResource PrimaryButtonStyle}"/>
        </StackPanel>

        <!-- Tabla de operaciones -->
        <Border Grid.Row="1" Background="{DynamicResource CardBackgroundBrush}" CornerRadius="5" Padding="8" BorderBrush="{DynamicResource WindowBorderBrush}" BorderThickness="1" Margin="0,0,0,8">
            <DataGrid x:Name="OperacionesGrid" AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True" FontSize="11"
                      GridLinesVisibility="Horizontal" AlternatingRowBackground="{DynamicResource InputBackgroundBrush}" RowBackground="Transparent"
                      BorderBrush="{DynamicResource WindowBorderBrush}" BorderThickness="0"
                      Background="{DynamicResource CardBackgroundBrush}" Foreground="{DynamicResource TextPrimaryBrush}"
                      HorizontalGridLinesBrush="{DynamicResource WindowBorderBrush}" VerticalGridLinesBrush="{DynamicResource WindowBorderBrush}">
                <DataGrid.Resources>
                    <!-- Estilo de los encabezados de columnas para que respeten el tema claro/oscuro -->
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}"/>
                        <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource WindowBorderBrush}"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                    </Style>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Fecha compra" Binding="{Binding FechaCompra, StringFormat=dd/MM HH:mm}" Width="110"/>
                    <DataGridTextColumn Header="Fecha venta" Binding="{Binding FechaVenta, StringFormat=dd/MM HH:mm}" Width="110"/>
                    <DataGridTextColumn Header="Símbolo" Binding="{Binding Simbolo}" Width="60"/>
                    <DataGridTextColumn Header="Cant." Binding="{Binding Cantidad}" Width="60"/>
                    <DataGridTextColumn Header="P. compra" Binding="{Binding PrecioCompra, StringFormat={}{0:F2}}" Width="80"/>
                    <DataGridTextColumn Header="P. venta" Binding="{Binding PrecioVenta, StringFormat={}{0:F2}}" Width="80"/>
                    <DataGridTextColumn Header="T. compra" Binding="{Binding TotalCompra, StringFormat={}{0:F2}}" Width="90"/>
                    <DataGridTextColumn Header="T. venta" Binding="{Binding TotalVenta, StringFormat={}{0:F2}}" Width="90"/>
                    <DataGridTextColumn Header="Ganancia" Binding="{Binding Ganancia, StringFormat={}{0:F2}}" Width="90"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Gráfico de mejores acciones -->
        <Border Grid.Row="2" Background="{DynamicResource CardBackgroundBrush}" CornerRadius="5" Padding="8" BorderBrush="{DynamicResource WindowBorderBrush}" BorderThickness="1" Margin="0,0,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <oxy:PlotView x:Name="MejoresAccionesPlot" Grid.Column="0" Background="{DynamicResource ChartBackgroundBrush}"/>

                <StackPanel Grid.Column="1" Margin="10,0,0,0" VerticalAlignment="Center">
                    <TextBlock Text="Mejores acciones" FontSize="14" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}" Margin="0,0,0,4"/>
                    <TextBlock x:Name="ResumenAcciones" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}" TextWrapping="Wrap"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
